!function(t,a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a():"function"==typeof define&&define.amd?define(["jquery"],a):a(t.jQuery)}(this,function(t){var a={wrapper:{element:"section","class":"tabbed",extra_classes:"",singular_class:"tab_single"},navigation:{element:"nav","class":"tabs",extra_classes:""},tabs:{"class":"tab",active_class:"active",extra_classes:"",toggle:!1,begin:null,animation:{easing:"easeOutCubic",duration:300}},buttons:{"class":"tab_button",active_class:"active",toggle:!1,begin:null,animation:{easing:"easeInOutCubic",duration:300}},content:{"class":"tab_content",active_class:"tab_active"}};t.fn.tabbed=function(s,e){var n=this;n.each(function(){var i={},o=this;i.init=function(s,e,n){i.scope=n,"function"==typeof s?(e=s,i.options=t.extend(!0,{},a,{})):i.options=t.extend(!0,{},a,s),i.populate_options(),i.collect_tabs(),i.add_aria_roles(),i.bind_events(),"function"==typeof e&&e.call(this,i.scope)},i.populate_options=function(){i.tabs_anim=i.options.tabs.animation,i.buttons_anim=i.options.buttons.animation;var t,a,s;for(var e in i.options)if(i.options.hasOwnProperty(e)){s=i.options[e];for(var n in s)s.hasOwnProperty(n)&&("class"===n?(a=s["class"].replace(",",".").replace(" ",""),t=e+"_class",i[t]="."+a):"active_class"===n&&(a=s.active_class,t=[e+"_active"],i[t]=a))}},i.collect_tabs=function(){var a=i.options,s=t(i.scope).find(i.buttons_class).not("[data-tabbed='true']"),e=s.length,o=t(document.createElement(a.wrapper.element)).addClass(a.wrapper["class"]).addClass(a.wrapper.extra_classes).attr("data-tabbed","true"),c=[],r=[],l="";if(e>0){for(var _,b,d=0;e>=d;d++,l="",_=[],b=[])n=t(s[d]),n.data("tabbed")!==!0&&n.length>0&&(_=n.nextUntil(":not("+i.content_class+", "+i.buttons_class+")").addBack(),n.parent(i.wrapper_class).data("tabbed")!==!0?(b=o.clone().insertBefore(_[0]),void 0!==n.data("tab")&&(l=n.data("tab"),b.addClass(l)),_.appendTo(b)):b=n.parent(i.wrapper_class),_.not(i.content_class).attr("data-tabbed","true"),c.push(_),r.push(b[0]));i.create_tab_nav(t(r)),i.activate_tabs(t(r))}},i.create_tab_nav=function(a){var s,e;a.each(function(){n=t(this),e=t(document.createElement(i.options.navigation.element)).addClass(i.options.navigation["class"]).addClass(i.options.navigation.extra_classes).attr("role","tablist"),s=n.children(i.buttons_class),s.length>1?0===n.children(i.navigation_class).length&&(e=e.clone().prependTo(n),s.attr({"aria-expanded":"false","aria-selected":"false"}).clone(!1).appendTo(e).addClass(i.options.tabs["class"]).addClass(i.options.tabs.extra_classes).removeClass(i.options.buttons["class"])):n.attr("data-tabbed","true").addClass(i.options.wrapper.single_class)})},i.activate_tabs=function(a){a.each(function(){n=t(this),n.children(i.buttons_class).hasClass(i.buttons_active)!==!0&&(i.current_item=n.children(i.buttons_class).first(),i.change_tabs(!0),n.attr("data-tabbed","true"))})},i.bind_events=function(){t(i.scope).on("tab-change",i.tabs_class+","+i.buttons_class,function(a){i.current_item=t(a.target),i.change_tabs()}),t(i.scope).on("click",i.tabs_class+","+i.buttons_class,function(a){a.preventDefault(),t(a.target).trigger("tab-change")})},i.change_tabs=function(a){i.hash=i.current_item.attr("href"),i.target=t(i.hash),i.target.hasClass("velocity-animating")||(i.both_tabs=t("[href='"+i.hash+"']"),a?i.skip_animations():i.is_tab()?(i.anim_opts=i.tabs_anim,i.options.tabs.toggle?i.is_active()?i.hide_tabs():(i.hide_tabs(),i.show_tabs()):i.is_active()||(i.hide_tabs(),i.show_tabs())):(i.anim_opts=i.buttons_anim,i.options.buttons.toggle?i.is_active()?i.hide_accordions():(i.hide_accordions(),i.show_accordions()):i.is_active()||(i.hide_accordions(),i.show_accordions())))},i.hide_tabs=function(){i.begin([i.current_item[0],i.target[0]],i.options.tabs.begin),i.target.siblings(i.content_class).hide().removeClass(i.content_active).attr("aria-hidden","true"),i.both_tabs.siblings(i.buttons_class+","+i.tabs_class).removeClass(i.tabs_active+" "+i.buttons_active).attr({"aria-expanded":"false","aria-selected":"false"}),i.options.tabs.toggle&&(i.target.hide().removeClass(i.content_active).attr("aria-hidden","true"),i.both_tabs.removeClass(i.tabs_active+" "+i.buttons_active).attr({"aria-expanded":"false","aria-selected":"false"}))},i.hide_accordions=function(){i.begin([i.current_item[0],i.target[0]],i.options.buttons.begin),i.target.siblings(i.content_class).velocity("slideUp",i.anim_opts,i.anim_opts).removeClass(i.content_active).attr("aria-hidden","true"),i.both_tabs.siblings(i.buttons_class+","+i.tabs_class).removeClass(i.tabs_active+" "+i.buttons_active).attr({"aria-expanded":"false","aria-selected":"false"}),i.options.buttons.toggle&&(i.both_tabs.removeClass(i.tabs_active+" "+i.buttons_active).attr({"aria-expanded":"false","aria-selected":"false"}),i.target.velocity("slideUp",i.anim_opts,i.anim_opts).removeClass(i.content_active).attr("aria-hidden","true"))},i.show_tabs=function(){i.target.css("display","block").velocity(i.anim_opts,i.anim_opts),i.make_active()},i.show_accordions=function(){i.target.velocity("slideDown",i.anim_opts,i.anim_opts),i.make_active()},i.make_active=function(){i.target.addClass(i.content_active).attr("aria-hidden","false"),i.both_tabs.not(i.buttons_class).addClass(i.tabs_active),i.both_tabs.not(i.tabs_class).addClass(i.buttons_active),i.both_tabs.attr({"aria-expanded":"true","aria-selected":"true"})},i.is_active=function(){return"true"===i.current_item.attr("aria-expanded")?!0:!1},i.is_tab=function(){return t(i.current_item).hasClass(i.options.tabs["class"])?!0:!1},i.skip_animations=function(){i.target.siblings(i.content_class).hide().removeClass(i.content_active).attr("aria-hidden","true"),i.both_tabs.siblings(i.buttons_class+","+i.tabs_class).removeClass(i.tabs_active+" "+i.buttons_active).attr({"aria-expanded":"false","aria-selected":"false"}),i.target.show().attr("aria-hidden","false"),i.make_active()},i.begin=function(t,a){"function"==typeof a&&a.call(t,t)},i.add_aria_roles=function(){var a="";t(i.buttons_class+","+i.tabs_class).each(function(){n=t(this),void 0!==n.attr("aria-controls")&&void 0!==n.attr("role")&&(a=n.attr("href"),a=a.substring(1),n.attr({"aria-controls":a,role:"tab"}))}),t(i.content_class).attr("aria-role","tabpanel")},i.init(s,e,o)})},t.fn.tabbed.defaults=a});